var HTMX_JSON_DEBUG=!0;let htmxJson=(()=>{function y(e){return{...e,__proto__:e.$this}}function C(e,t,n,r){return{$this:e,$parent:t,$index:n,$key:r}}function o(t,n,r,i){if(3===t.nodeType)return(o=H(t,"text",e))?(i||(t.textContent=o(n)),t):null;if(1!==t.nodeType)return null;{if("TEMPLATE"===t.nodeName)return((t,e,n,r)=>{var i=L(t,"json-each");if(!i)return null;if(M(t),r)return t;var l=H(t,"/json-each",E,n);if(!l)return t;let o=H(t,"existingList",T,l),a=((e,t,n)=>{let r=e(t),i=L(n,"json-key");return r?Array.isArray(r)?i?r.map(e=>[String(i({$this:e})),e]):r.map((e,t)=>[t.toString(),e]):"object"==typeof r?Object.entries(r).map(([e,t])=>[e,t]):[]:[]})(i,e,t),u=y(e),f;for(f=0;f<a.length&&f<o.length;f++){var[s,c]=a[f];let e=o[f];var h,m,v,p,b=e[0],d=e[1];b===s?w(d.nextSibling,o[f+1]?.[1]??l,C(c,u,f,s)):0<=(b=((e,t,n=0)=>{for(;n<e.length;n++)if(e[n][0]===t)return n;return-1})(a,b,f))?(p=((e,t,n=0)=>{for(;n<e.length;n++)if(e[n][0]===t)return n;return-1})(o,s,f),b<p?(v=o[p],m=v[1],h=o[p+1]?.[1]??l,A(m,h,d),w(m,d,C(c,u,f,s)),o.splice(p,1),o.splice(f,0,v)):0<=p?(h=o[f+1]?.[1]??l,m=o[b+1]?.[1]??l,A(d,h,m),o.splice(f,1),o.splice(b,0,e),f--):(v=k(t),p=document.createComment(s),d.before(p,v),w(p.nextSibling,d,C(c,u,f,s)),o.splice(f,0,[s,p]))):(b=o[f+1]?.[1]??l,O(d,b),o.splice(f,1),f--)}for(;f<a.length;f++){var[j,g]=a[f],x=k(t),$=document.createComment(j);l.before($,x),w($.nextSibling,l,C(g,u,f,j)),o.push([j,$])}let S=o[f];return S&&(O(S[1],l),o.splice(f,o.length-f)),l})(t,n,r,i)??((t,n,e,r)=>{var i=L(t,"json-if");if(!i)return null;M(t);let l=t,o=[],a=t;for(;;){var u=m(a,"json-else-if");if(!u)break;M(a=u),o.push(u)}if((t=m(a,"json-else"))&&M(t),r)return t??o.at(-1)??l;var f=((t,e)=>{let n=t.nextSibling;for(;n instanceof Text;)n=n.nextSibling;if(n instanceof Comment&&n!==e)return n;{let e=document.createComment("");return t.after(e),e}})(t??a,e),s=H(f,"/json-if",E,e);if(!s)throw new Error("Could not create end, that is weird...");if(i(n))"json-if"!==f.data&&(f.data="json-if",O(f.nextSibling,s),s.before(k(l)));else{let e=0;for(;e<o.length;e++){var c=o[e],h=L(c,"json-else-if");if(h?.(n)){h="json-else-if "+e;f.data!==h&&(f.data=h,O(f.nextSibling,s),s.before(k(c)));break}}e===o.length&&"json-else"!==f.data&&(f.data="json-else",O(f.nextSibling,s),t)&&s.before(k(t))}return w(f.nextSibling,s,n),s})(t,n,r,i)??null;let e=n;var l,o=H(t,"attributes",a);for(l of o)if(l?i||(e=l(e,t)??e):e=null,!e)break;return null===e?1===o.length&&null===o[0]?null:t:!1!==e&&w(t.firstChild,void 0,e,i)&&0===o.length?(s(t,"attributes",[null]),null):t}}function e(e){return e.textContent?.includes("${")?h("`"+e.textContent+"`"):null}"undefined"!=typeof htmx&&htmx.defineExtension("json-swap",{isInlineSwap:function(e){return"json"===e},handleSwap:function(e,t,n){if("json"===e)return o(t,{$this:JSON.parse(n.textContent)}),[t]}});let i=[{match:e=>e.name.startsWith("@"),factory(e,t,n){let r=t.name.substring(1),i=n(t.value);if(i)return(e,t)=>{var n=i(e);return null===n?t.removeAttribute(r):t.setAttribute(r,n),e}}},{match:e=>e.name.startsWith("."),factory(e,t,n){let r=n(t.value);if(r){let n=(e=>{var t=c[e];return t||(t=new Function("obj","value",`obj${e} = value;`),c[e]=t)})(t.name.split(".").map(e=>e&&e.split("-").map(([e,...t],n)=>(0===n?e:e.toUpperCase())+t.join("")).join("")).join("."));return(e,t)=>(n(t,r(e)),e)}}},{match:e=>"json-ignore"===e.name,factory(e,t,n){let r=n(t.value,"$prev");return null===r?null:(e,t)=>{if(r({...e,$prev:f(t,"json-ignore-prev")}))return!1;s(t,"json-ignore-prev",e.$this)}}},{match:e=>"json-with"===e.name,factory(e,t,n){let r=n(t.value,"$prev");if(r)return(e,t)=>{var n=f(t,"json-with-prev"),n=r({...e,$prev:n});return!!n&&(s(t,"json-with-prev",n),C(n,y(e)))}}},{match:e=>"json-text"===e.name,factory(e,t,n){let r=n(t.value);if(r)return(e,t)=>{t.textContent=r(e)}}},{match:e=>"json-show"===e.name,factory(e,t,r){if(e instanceof HTMLElement){let n=r(t.value);if(n)return(e,t)=>{t.style.display=n(e)?"":"none"}}}},{match:e=>"json-hide"===e.name,factory(e,t,r){if(e instanceof HTMLElement){let n=r(t.value);if(n)return(e,t)=>{t.style.display=n(e)?"none":""}}}},{match:e=>"name"===e.name,factory(e,n,t){return e instanceof HTMLInputElement?"checkbox"===e.type?(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e)}:"radio"===e.type?(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e===t.value)}:(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:void 0}}];function a(e){var n=[];for(let t of e.attributes){var r=(0,i.find(e=>e.match(t))?.factory)?.(e,t,h);if(r)n.push(r);else if(null===r){n.push(null);break}}return n}function T(e,t,n){var r=[];let i=e.nextSibling;for(;i instanceof Text;)i=i.nextSibling;for(;i instanceof Comment&&i!==n;)r.push([i.data,i]),i=l(i)??n;return r}function E(e,t,n){var n=l(e,t,n);return n||(n=document.createComment(t),e.after(n),n)}function m(e,t){return e.nextElementSibling instanceof HTMLTemplateElement&&e.nextElementSibling.hasAttribute(t)?e.nextElementSibling:void 0}function l(e,t,n){let r=0,i=0;for(e=e?.nextSibling??null;e&&e!==n;){if(e instanceof Comment){if(0<r&&"/json-if"===e.data)r--;else if(0<i&&"/json-each"===e.data)i--;else if(0===r&&0===i&&(void 0===t||e.data===t))return e}else if(e instanceof HTMLTemplateElement)for(var{name:l}of e.attributes)"json-if"===l?r++:"json-each"===l&&i++;e=e.nextSibling}return null}function w(e,t,n,r){let i=!0;for(;e&&e!==t;){var l=o(e,n,t,r);e=(null===l?e:(i=!1,l)).nextSibling}return i}function L(e,t){return H(e,"getter-"+t,()=>h(e.getAttribute(t)))}function t(e){return w(e.content.firstChild,void 0,{$this:"preparse"},!0)}function M(e){H(e,"preParsed",t)}function k(e){var t=e.content.cloneNode(!0);return function e(t,n){if(!t||!n)return;t[u]&&(n[u]={...t[u]});t instanceof HTMLTemplateElement&&n instanceof HTMLTemplateElement?e(t.content.firstChild,n.content.firstChild):e(t.firstChild,n.firstChild);e(t.nextSibling,n.nextSibling)}(e.content.firstChild,t.firstChild),t}let u=Symbol();function f(e,t){return(e[u]??=Object.create(null))[t]}function s(e,t,n){(e[u]??=Object.create(null))[t]=n}function H(e,t,n,...r){var i=e[u]??=Object.create(null);let l=i[t];return void 0===l&&(l=n(e,t,...r),i[t]=l),l}let c=Object.create(null),n=Object.create(null);function h(e,...t){return e?n[e]||(t=new Function(`{$this, $parent, $index, $key, ${t.join(", ")}}`,`
        try {
          with ($this){
            return (${e});
          }
        }catch(e){
          if(e instanceof ReferenceError){
            throw new ReferenceError(e.message + ' in '+JSON.stringify($this, null, 2));
          }
          throw e;
        }
      `),n[e]=t):null}function O(e,t){var n=e?.previousSibling;if(n)for(;n.nextSibling&&n.nextSibling!==t;)n.nextSibling.remove()}function A(t,n,r){if(t.parentNode){var i=[];let e=t;for(;e&&e!==n;)i.push(e),e=e.nextSibling;r.before(...i)}}return{swap(e,t){o(e,{$this:t})},directives:i}})();
//# sourceMappingURL=./htmx-json.min.js.map