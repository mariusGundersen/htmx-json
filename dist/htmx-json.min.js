var HTMX_JSON_DEBUG=!0;let htmxJson=(()=>{function v(e,n,t,i){return{$this:e,$parent:n&&{...n,__proto__:n.$this},$index:t,$key:i}}function a(i,r,o){if(i instanceof Text)return(l=j(i,"text",n))?(i.textContent=l(r),i):null;if(i instanceof HTMLTemplateElement)return((r,o,e)=>{var n=S(r,"json-each");if(!n)return null;var l=j(r,"/json-each",x,e);if(!l)return r;let s=j(r,"existingList",b,l),a=((e,n,t)=>{let i=e(n),r=S(t,"json-key");return i?Array.isArray(i)?i.map((e,n)=>[r?r(v(e)):n.toString(),e]):"object"==typeof i?Object.entries(i).map(([e,n])=>[e,n]):[]:[]})(n,o,r),u;for(u=0;u<a.length;u++){let[t,e]=a[u],i=s[u];if(i instanceof Comment){let n=i.data;if(n===t)g(i.nextSibling,s[u+1]??l,v(e,o,u,t));else if(0<=a.findIndex(([e])=>e===n)){var f=s.findIndex(e=>e.data===t);if(0<=f){for(var c=s[f],p=s[f+1]??l,d=c.previousSibling;d?.nextSibling&&d.nextSibling!==p;)i.parentNode?.insertBefore(d.nextSibling,i);g(c,i,v(e,o,u,t)),s.splice(f,1),s.splice(u,0,c)}else{f=r.content.cloneNode(!0),c=document.createComment(t);s.splice(u,0,c),r.parentNode?.insertBefore(c,i),r.parentNode?.insertBefore(f,i),g(c.nextSibling,i,v(e,o,u,t))}}else{f=s[u+1]??l;$(i,f),s.splice(u,1),u--}}else{var h=r.content.cloneNode(!0),m=document.createComment(t);s.push(m),r.parentNode?.insertBefore(m,l),r.parentNode?.insertBefore(h,l),g(m.nextSibling,l,v(e,o,u,t))}}let t=s[u];return t&&($(t,l),s.splice(u,s.length-u)),l})(i,r,o)??((n,t,e)=>{var i=S(n,"json-if");if(!i)return null;let r=n,o=[],l=n;for(;;){var s=p(l,"json-else-if");if(!s)break;l=s,o.push(s)}var a=((n,e)=>{let t=n.nextSibling;for(;t instanceof Text;)t=t.nextSibling;if(t instanceof Comment&&t!==e)return t;{let e=document.createComment("");return n.parentNode?.insertBefore(e,n.nextSibling),e}})((n=p(l,"json-else"))??l,e),u=j(a,"/json-if",x,e);if(!u)throw new Error("Could not create end, that is weird...");if(i(t))"json-if"!==a.data&&(a.data="json-if",$(a.nextSibling,u),r.parentNode?.insertBefore(r.content.cloneNode(!0),u));else{let e=0;for(;e<o.length;e++){var f=o[e],c=S(f,"json-else-if");if(c?.(t)){c="json-else-if "+e;a.data!==c&&(a.data=c,$(a.nextSibling,u),f.parentNode?.insertBefore(f.content.cloneNode(!0),u));break}}e===o.length&&"json-else"!==a.data&&(a.data="json-else",$(a.nextSibling,u),n)&&n.parentNode?.insertBefore(n.content.cloneNode(!0),u)}return g(a.nextSibling,u,t),u})(i,r,o)??i;if(i instanceof HTMLElement){let t=r;var e,l=j(i,"attributes",u);for(e of l){if(!t)break;t=e(t)}if(null===t)return 1===l.length?null:i;if(!1===t)return i;{let e=!0,n=i.firstChild;for(;n;){var s=a(n,t);e&&=null===s,n=(s??n).nextSibling}return e&&0===l.length?(o="attributes",r=[()=>!1],(i[f]??=new Map).set(o,r),null):i}}return i}function n(e){return e.textContent?.includes("${")?s("`"+e.textContent+"`"):null}function u(o){var e,l=[];for(let r of o.attributes)if(r.name.startsWith("@")){let t=r.name.substring(1),i=s(r.value);i&&l.push(e=>{var n=i(e);return null===n?o.removeAttribute(t):o.setAttribute(t,n),e})}else if(r.name.startsWith(".")){let t=s(r.value);if(t){e=r.name,e=e.split(".").map(e=>e&&e.split("-").map(([e,...n],t)=>(0===t?e:e.toUpperCase())+n.join("")).join("")).join(".");let n=new Function("obj","value",`obj${e} = value;`);l.push(e=>(n(o,t(e)),e))}}else if("json-ignore"===r.name){let n=s(r.value,"$prev"),t=void 0;if(l.push(e=>null===n?null:!n({...e,$prev:t})&&(t=e.$this,e)),null===n)break}else if("json-with"===r.name){let t=s(r.value,"$prev"),i=void 0;t&&l.push(e=>{var n=t({...e,$prev:i});return!!n&&(i=e.$this,v(n,e))})}else if("json-text"===r.name){let n=s(r.value);n&&l.push(e=>(o.textContent=n(e),e))}else if("json-show"===r.name){let n=s(r.value);n&&l.push(e=>(o.style.display=n(e)?"":"none",e))}else if("json-hide"===r.name){let n=s(r.value);n&&l.push(e=>(o.style.display=n(e)?"none":"",e))}else"name"===r.name&&o instanceof HTMLInputElement&&("checkbox"===o.type?l.push(e=>(r.value in e.$this&&(o.checked=e.$this[r.value]),e)):"radio"===o.type?l.push(e=>(r.value in e.$this&&(o.checked=e.$this[r.value]===o.value),e)):l.push(e=>(r.value in e.$this&&(o.value=e.$this[r.value]),e)));return l}function b(e,n,t){var i=[];let r=e.nextSibling;for(;r instanceof Text;)r=r.nextSibling;for(;r instanceof Comment&&r!==t;)i.push(r),r=o(r)??t;return i}function x(e,n,t){return o(e,n,t)??e.parentNode?.insertBefore(document.createComment(n),e.nextSibling)}function p(e,n){return e.nextElementSibling instanceof HTMLTemplateElement&&e.nextElementSibling.hasAttribute(n)?e.nextElementSibling:void 0}function o(e,n,t){let i=0,r=0;for(e=e?.nextSibling??null;e&&e!==t;){if(e instanceof Comment){if(0<i&&"/json-if"===e.data)i--;else if(0<r&&"/json-each"===e.data)r--;else if(0===i&&0===r&&(void 0===n||e.data===n))return e}else if(e instanceof HTMLTemplateElement)for(var{name:o}of e.attributes)"json-if"===o?i++:"json-each"===o&&r++;e=e.nextSibling}return null}function g(e,n,t){for(;e&&e!==n;)e=(a(e,t,n)??e).nextSibling}function S(e,n){return j(e,"getter-"+n,()=>s(e.getAttribute(n)))}"undefined"!=typeof htmx&&htmx.defineExtension("json-swap",{isInlineSwap:function(e){return"json"===e},handleSwap:function(e,n,t){if("json"===e)return a(n,v(JSON.parse(t.textContent))),[n]}});let f=Symbol();function j(e,n,t,...i){var r=e[f]??=new Map;let o=r.get(n);return void 0===o&&(o=t(e,n,...i),r.set(n,o)),o}function s(e,...n){return e?new Function(`{$this, $parent, $index, $key, ${n.join(", ")}}`,`
        try {
          with ($this){
            return (${e});
          }
        }catch(e){
          if(e instanceof ReferenceError){
            throw new ReferenceError(e.message + ' in '+JSON.stringify($this, null, 2));
          }
          throw e;
        }
      `):null}function $(e,n){var t=e?.previousSibling;if(t)for(;t.nextSibling&&t.nextSibling!==n;)t.nextSibling.remove()}return{swap(e,n){a(e,v(n))}}})();
//# sourceMappingURL=./htmx-json.min.js.map