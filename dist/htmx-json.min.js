var HTMX_JSON_DEBUG=!0;let htmxJson=(()=>{function v(e,t,n,i){return{$this:e,$parent:t&&{...t,__proto__:t.$this},$index:n,$key:i}}function o(t,n,i){if(t instanceof Text)return(o=S(t,"text",e))?(t.textContent=o(n),t):null;if(t instanceof HTMLTemplateElement)return((r,o,e)=>{var t=j(r,"json-each");if(!t)return null;var l=S(r,"/json-each",x,e);if(!l)return r;let a=S(r,"existingList",b,l),s=((e,t,n)=>{let i=e(t),r=j(n,"json-key");return i?Array.isArray(i)?i.map((e,t)=>[r?r(v(e)):t.toString(),e]):"object"==typeof i?Object.entries(i).map(([e,t])=>[e,t]):[]:[]})(t,o,r),f;for(f=0;f<s.length;f++){let[n,e]=s[f],i=a[f];if(i instanceof Comment){let t=i.data;if(t===n)g(i.nextSibling,a[f+1]??l,v(e,o,f,n));else if(0<=s.findIndex(([e])=>e===t)){var u=a.findIndex(e=>e.data===n);if(0<=u){for(var c=a[u],d=a[u+1]??l,m=c.previousSibling;m?.nextSibling&&m.nextSibling!==d;)i.parentNode?.insertBefore(m.nextSibling,i);g(c,i,v(e,o,f,n)),a.splice(u,1),a.splice(f,0,c)}else{u=r.content.cloneNode(!0),c=document.createComment(n);a.splice(f,0,c),r.parentNode?.insertBefore(c,i),r.parentNode?.insertBefore(u,i),g(c.nextSibling,i,v(e,o,f,n))}}else{u=a[f+1]??l;$(i,u),a.splice(f,1),f--}}else{var h=r.content.cloneNode(!0),p=document.createComment(n);a.push(p),r.parentNode?.insertBefore(p,l),r.parentNode?.insertBefore(h,l),g(p.nextSibling,l,v(e,o,f,n))}}let n=a[f];return n&&($(n,l),a.splice(f,a.length-f)),l})(t,n,i)??((t,n,e)=>{var i=j(t,"json-if");if(!i)return null;let r=t,o=[],l=t;for(;;){var a=d(l,"json-else-if");if(!a)break;l=a,o.push(a)}var s=((t,e)=>{let n=t.nextSibling;for(;n instanceof Text;)n=n.nextSibling;if(n instanceof Comment&&n!==e)return n;{let e=document.createComment("");return t.parentNode?.insertBefore(e,t.nextSibling),e}})((t=d(l,"json-else"))??l,e),f=S(s,"/json-if",x,e);if(!f)throw new Error("Could not create end, that is weird...");if(i(n))"json-if"!==s.data&&(s.data="json-if",$(s.nextSibling,f),r.parentNode?.insertBefore(r.content.cloneNode(!0),f));else{let e=0;for(;e<o.length;e++){var u=o[e],c=j(u,"json-else-if");if(c?.(n)){c="json-else-if "+e;s.data!==c&&(s.data=c,$(s.nextSibling,f),u.parentNode?.insertBefore(u.content.cloneNode(!0),f));break}}e===o.length&&"json-else"!==s.data&&(s.data="json-else",$(s.nextSibling,f),t)&&t.parentNode?.insertBefore(t.content.cloneNode(!0),f)}return g(s.nextSibling,f,n),f})(t,n,i)??t;if(t instanceof HTMLElement){let e=n;var r,o=S(t,"attributes",a);for(r of o){if(!e)break;var l=r(e);e=void 0===l?e:l}return null===e?1===o.length?null:t:!1!==e&&g(t.firstChild,void 0,e)&&0===o.length?(i="attributes",n=[()=>!1],(t[s]??=new Map).set(i,n),null):t}return t}function e(e){return e.textContent?.includes("${")?f("`"+e.textContent+"`"):null}"undefined"!=typeof htmx&&htmx.defineExtension("json-swap",{isInlineSwap:function(e){return"json"===e},handleSwap:function(e,t,n){if("json"===e)return o(t,v(JSON.parse(n.textContent))),[t]}});let r=[{match:e=>e.name.startsWith("@"),factory(n,e,t){let i=e.name.substring(1),r=t(e.value);if(r)return e=>{var t=r(e);return null===t?n.removeAttribute(i):n.setAttribute(i,t),e}}},{match:e=>e.name.startsWith("."),factory(n,e,i){let r=i(e.value);if(r){i=e.name,e=i.split(".").map(e=>e&&e.split("-").map(([e,...t],n)=>(0===n?e:e.toUpperCase())+t.join("")).join("")).join(".");let t=new Function("obj","value",`obj${e} = value;`);return e=>(t(n,r(e)),e)}}},{match:e=>"json-ignore"===e.name,factory(e,t,n){let i=n(t.value,"$prev"),r=void 0;return null===i?null:e=>{if(i({...e,$prev:r}))return!1;r=e.$this}}},{match:e=>"json-with"===e.name,factory(e,t,n){let i=n(t.value,"$prev"),r=void 0;if(i)return e=>{var t=i({...e,$prev:r});return!!t&&v(r=t,e)}}},{match:e=>"json-text"===e.name,factory(t,e,n){let i=n(e.value);if(i)return e=>{t.textContent=i(e)}}},{match:e=>"json-show"===e.name,factory(t,e,n){let i=n(e.value);if(i)return e=>{t.style.display=i(e)?"":"none"}}},{match:e=>"json-hide"===e.name,factory(t,e,n){let i=n(e.value);if(i)return e=>{t.style.display=i(e)?"none":""}}},{match:e=>"name"===e.name,factory(t,n,e){return t instanceof HTMLInputElement?"checkbox"===t.type?e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e)}:"radio"===t.type?e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e===t.value)}:e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:void 0}}];function a(e){var n=[];for(let t of e.attributes){var i=(0,r.find(e=>e.match(t))?.factory)?.(e,t,f);if(i)n.push(i);else if(null===i){n.push(()=>null);break}}return n}function b(e,t,n){var i=[];let r=e.nextSibling;for(;r instanceof Text;)r=r.nextSibling;for(;r instanceof Comment&&r!==n;)i.push(r),r=l(r)??n;return i}function x(e,t,n){return l(e,t,n)??e.parentNode?.insertBefore(document.createComment(t),e.nextSibling)}function d(e,t){return e.nextElementSibling instanceof HTMLTemplateElement&&e.nextElementSibling.hasAttribute(t)?e.nextElementSibling:void 0}function l(e,t,n){let i=0,r=0;for(e=e?.nextSibling??null;e&&e!==n;){if(e instanceof Comment){if(0<i&&"/json-if"===e.data)i--;else if(0<r&&"/json-each"===e.data)r--;else if(0===i&&0===r&&(void 0===t||e.data===t))return e}else if(e instanceof HTMLTemplateElement)for(var{name:o}of e.attributes)"json-if"===o?i++:"json-each"===o&&r++;e=e.nextSibling}return null}function g(e,t,n){let i=!0;for(;e&&e!==t;){var r=o(e,n,t);i&&=null===r,e=(r??e).nextSibling}return i}function j(e,t){return S(e,"getter-"+t,()=>f(e.getAttribute(t)))}let s=Symbol();function S(e,t,n,...i){var r=e[s]??=new Map;let o=r.get(t);return void 0===o&&(o=n(e,t,...i),r.set(t,o)),o}function f(e,...t){return e?new Function(`{$this, $parent, $index, $key, ${t.join(", ")}}`,`
        try {
          with ($this){
            return (${e});
          }
        }catch(e){
          if(e instanceof ReferenceError){
            throw new ReferenceError(e.message + ' in '+JSON.stringify($this, null, 2));
          }
          throw e;
        }
      `):null}function $(e,t){var n=e?.previousSibling;if(n)for(;n.nextSibling&&n.nextSibling!==t;)n.nextSibling.remove()}return{swap(e,t){o(e,v(t))},directives:r}})();
//# sourceMappingURL=./htmx-json.min.js.map