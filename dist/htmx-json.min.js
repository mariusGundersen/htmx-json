var HTMX_JSON_DEBUG=!0;let htmxJson=(()=>{function y(e){return{...e,__proto__:e.$this}}function C(e,t,n,i){return{$this:e,$parent:t,$index:n,$key:i}}function o(t,n,i,r){if(3===t.nodeType)return(o=A(t,"text",e))?(r||(t.textContent=o(n)),t):null;if(1!==t.nodeType)return null;{if("TEMPLATE"===t.nodeName)return((t,e,n,i)=>{var r=k(t,"json-each");if(!r)return null;if(L(t),i)return t;var l=A(t,"/json-each",T,n);if(!l)return t;let o=A(t,"existingList",E,l),a=((e,t,n)=>{let i=e(t),r=k(n,"json-key");return i?Array.isArray(i)?r?i.map(e=>[String(r({$this:e})),e]):i.map((e,t)=>[t.toString(),e]):"object"==typeof i?Object.entries(i).map(([e,t])=>[e,t]):[]:[]})(r,e,t),u=y(e),f;for(f=0;f<a.length&&f<o.length;f++){var[s,c]=a[f];let e=o[f];var h,m,v,d,p=e[0],b=e[1];p===s?w(b.nextSibling,o[f+1]?.[1]??l,C(c,u,f,s)):0<=(p=((e,t,n=0)=>{for(;n<e.length;n++)if(e[n][0]===t)return n;return-1})(a,p,f))?(d=((e,t,n=0)=>{for(;n<e.length;n++)if(e[n][0]===t)return n;return-1})(o,s,f),p<d?(v=o[d],m=v[1],h=o[d+1]?.[1]??l,N(m,h,b),w(m,b,C(c,u,f,s)),o.splice(d,1),o.splice(f,0,v)):0<=d?(h=o[f+1]?.[1]??l,m=o[p+1]?.[1]??l,N(b,h,m),o.splice(f,1),o.splice(p,0,e),f--):(v=M(t),d=document.createComment(s),b.before(d,v),w(d.nextSibling,b,C(c,u,f,s)),o.splice(f,0,[s,d]))):(p=o[f+1]?.[1]??l,H(b,p),o.splice(f,1),f--)}for(;f<a.length;f++){var[g,x]=a[f],j=M(t),$=document.createComment(g);l.before($,j),w($.nextSibling,l,C(x,u,f,g)),o.push([g,$])}let S=o[f];return S&&(H(S[1],l),o.splice(f,o.length-f)),l})(t,n,i,r)??((t,n,e,i)=>{var r=k(t,"json-if");if(!r)return null;L(t);let l=t,o=[],a=t;for(;;){var u=m(a,"json-else-if");if(!u)break;L(a=u),o.push(u)}if((t=m(a,"json-else"))&&L(t),i)return t??o.at(-1)??l;var f=((t,e)=>{let n=t.nextSibling;for(;n instanceof Text;)n=n.nextSibling;if(n instanceof Comment&&n!==e)return n;{let e=document.createComment("");return t.after(e),e}})(t??a,e),s=A(f,"/json-if",T,e);if(!s)throw new Error("Could not create end, that is weird...");if(r(n))"json-if"!==f.data&&(f.data="json-if",H(f.nextSibling,s),s.before(M(l)));else{let e=0;for(;e<o.length;e++){var c=o[e],h=k(c,"json-else-if");if(h?.(n)){h="json-else-if "+e;f.data!==h&&(f.data=h,H(f.nextSibling,s),s.before(M(c)));break}}e===o.length&&"json-else"!==f.data&&(f.data="json-else",H(f.nextSibling,s),t)&&s.before(M(t))}return w(f.nextSibling,s,n),s})(t,n,i,r)??null;let e=n;var l,o=A(t,"attributes",a);for(l of o)if(l?r||(e=l(e)??e):e=null,!e)break;return null===e?1===o.length&&null===o[0]?null:t:!1!==e&&w(t.firstChild,void 0,e,r)&&0===o.length?(i="attributes",n=[null],(t[u]??={})[i]=n,null):t}}function e(e){return e.textContent?.includes("${")?f("`"+e.textContent+"`"):null}"undefined"!=typeof htmx&&htmx.defineExtension("json-swap",{isInlineSwap:function(e){return"json"===e},handleSwap:function(e,t,n){if("json"===e)return o(t,{$this:JSON.parse(n.textContent)}),[t]}});let r=[{match:e=>e.name.startsWith("@"),factory(n,e,t){let i=e.name.substring(1),r=t(e.value);if(r)return e=>{var t=r(e);return null===t?n.removeAttribute(i):n.setAttribute(i,t),e}}},{match:e=>e.name.startsWith("."),factory(n,e,i){let r=i(e.value);if(r){i=e.name,e=i.split(".").map(e=>e&&e.split("-").map(([e,...t],n)=>(0===n?e:e.toUpperCase())+t.join("")).join("")).join(".");let t=new Function("obj","value",`obj${e} = value;`);return e=>(t(n,r(e)),e)}}},{match:e=>"json-ignore"===e.name,factory(e,t,n){let i=n(t.value,"$prev"),r=void 0;return null===i?null:e=>{if(i({...e,$prev:r}))return!1;r=e.$this}}},{match:e=>"json-with"===e.name,factory(e,t,n){let i=n(t.value,"$prev"),r=void 0;if(i)return e=>{var t=i({...e,$prev:r});return!!t&&C(r=t,y(e))}}},{match:e=>"json-text"===e.name,factory(t,e,n){let i=n(e.value);if(i)return e=>{t.textContent=i(e)}}},{match:e=>"json-show"===e.name,factory(n,e,i){if(n instanceof HTMLElement){let t=i(e.value);if(t)return e=>{n.style.display=t(e)?"":"none"}}}},{match:e=>"json-hide"===e.name,factory(n,e,i){if(n instanceof HTMLElement){let t=i(e.value);if(t)return e=>{n.style.display=t(e)?"none":""}}}},{match:e=>"name"===e.name,factory(t,n,e){return t instanceof HTMLInputElement?"checkbox"===t.type?e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e)}:"radio"===t.type?e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e===t.value)}:e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?e=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:void 0}}];function a(e){var n=[];for(let t of e.attributes){var i=(0,r.find(e=>e.match(t))?.factory)?.(e,t,f);if(i)n.push(i);else if(null===i){n.push(null);break}}return n}function E(e,t,n){var i=[];let r=e.nextSibling;for(;r instanceof Text;)r=r.nextSibling;for(;r instanceof Comment&&r!==n;)i.push([r.data,r]),r=l(r)??n;return i}function T(e,t,n){var n=l(e,t,n);return n||(n=document.createComment(t),e.after(n),n)}function m(e,t){return e.nextElementSibling instanceof HTMLTemplateElement&&e.nextElementSibling.hasAttribute(t)?e.nextElementSibling:void 0}function l(e,t,n){let i=0,r=0;for(e=e?.nextSibling??null;e&&e!==n;){if(e instanceof Comment){if(0<i&&"/json-if"===e.data)i--;else if(0<r&&"/json-each"===e.data)r--;else if(0===i&&0===r&&(void 0===t||e.data===t))return e}else if(e instanceof HTMLTemplateElement)for(var{name:l}of e.attributes)"json-if"===l?i++:"json-each"===l&&r++;e=e.nextSibling}return null}function w(e,t,n,i){let r=!0;for(;e&&e!==t;){var l=o(e,n,t,i);e=(null===l?e:(r=!1,l)).nextSibling}return r}function k(e,t){return A(e,"getter-"+t,()=>f(e.getAttribute(t)))}function t(e){return w(e.content.firstChild,void 0,{$this:"preparse"},!0)}function L(e){A(e,"preParsed",t)}function M(e){var t=e.content.cloneNode(!0);return function e(t,n){if(!t||!n)return;t[u]&&(n[u]={...t[u]});e(t.firstChild,n.firstChild);e(t.nextSibling,n.nextSibling)}(e.content.firstChild,t.firstChild),t}let u=Symbol();function A(e,t,n,...i){var r=e[u]??={};let l=r[t];return void 0===l&&(l=n(e,t,...i),r[t]=l),l}function f(e,...t){return e?new Function(`{$this, $parent, $index, $key, ${t.join(", ")}}`,`
        try {
          with ($this){
            return (${e});
          }
        }catch(e){
          if(e instanceof ReferenceError){
            throw new ReferenceError(e.message + ' in '+JSON.stringify($this, null, 2));
          }
          throw e;
        }
      `):null}function H(e,t){var n=e?.previousSibling;if(n)for(;n.nextSibling&&n.nextSibling!==t;)n.nextSibling.remove()}function N(t,n,i){if(t.parentNode){var r=[];let e=t;for(;e&&e!==n;)r.push(e),e=e.nextSibling;i.before(...r)}}return{swap(e,t){o(e,{$this:t})},directives:r}})();
//# sourceMappingURL=./htmx-json.min.js.map