var HTMX_JSON_DEBUG=!0;let htmxJson=(()=>{function y(e){return{...e,__proto__:e.$this}}function C(e,t,n,i){return{$this:e,$parent:t,$index:n,$key:i}}function o(t,n,i,r){if(3===t.nodeType)return(o=H(t,"text",e))?(r||(t.textContent=o(n)),t):null;if(1!==t.nodeType)return null;{if("TEMPLATE"===t.nodeName)return((t,e,n,i)=>{var r=L(t,"json-each");if(!r)return null;if(M(t),i)return t;var l=H(t,"/json-each",E,n);if(!l)return t;let o=H(t,"existingList",T,l),a=((e,t,n)=>{let i=e(t),r=L(n,"json-key");return i?Array.isArray(i)?r?i.map(e=>[String(r({$this:e})),e]):i.map((e,t)=>[t.toString(),e]):"object"==typeof i?Object.entries(i).map(([e,t])=>[e,t]):[]:[]})(r,e,t),u=y(e),f;for(f=0;f<a.length&&f<o.length;f++){var[s,c]=a[f];let e=o[f];var h,m,v,p,d=e[0],b=e[1];d===s?w(b.nextSibling,o[f+1]?.[1]??l,C(c,u,f,s)):0<=(d=((e,t,n=0)=>{for(;n<e.length;n++)if(e[n][0]===t)return n;return-1})(a,d,f))?(p=((e,t,n=0)=>{for(;n<e.length;n++)if(e[n][0]===t)return n;return-1})(o,s,f),d<p?(v=o[p],m=v[1],h=o[p+1]?.[1]??l,N(m,h,b),w(m,b,C(c,u,f,s)),o.splice(p,1),o.splice(f,0,v)):0<=p?(h=o[f+1]?.[1]??l,m=o[d+1]?.[1]??l,N(b,h,m),o.splice(f,1),o.splice(d,0,e),f--):(v=k(t),p=document.createComment(s),b.before(p,v),w(p.nextSibling,b,C(c,u,f,s)),o.splice(f,0,[s,p]))):(d=o[f+1]?.[1]??l,A(b,d),o.splice(f,1),f--)}for(;f<a.length;f++){var[g,j]=a[f],x=k(t),$=document.createComment(g);l.before($,x),w($.nextSibling,l,C(j,u,f,g)),o.push([g,$])}let S=o[f];return S&&(A(S[1],l),o.splice(f,o.length-f)),l})(t,n,i,r)??((t,n,e,i)=>{var r=L(t,"json-if");if(!r)return null;M(t);let l=t,o=[],a=t;for(;;){var u=m(a,"json-else-if");if(!u)break;M(a=u),o.push(u)}if((t=m(a,"json-else"))&&M(t),i)return t??o.at(-1)??l;var f=((t,e)=>{let n=t.nextSibling;for(;n instanceof Text;)n=n.nextSibling;if(n instanceof Comment&&n!==e)return n;{let e=document.createComment("");return t.after(e),e}})(t??a,e),s=H(f,"/json-if",E,e);if(!s)throw new Error("Could not create end, that is weird...");if(r(n))"json-if"!==f.data&&(f.data="json-if",A(f.nextSibling,s),s.before(k(l)));else{let e=0;for(;e<o.length;e++){var c=o[e],h=L(c,"json-else-if");if(h?.(n)){h="json-else-if "+e;f.data!==h&&(f.data=h,A(f.nextSibling,s),s.before(k(c)));break}}e===o.length&&"json-else"!==f.data&&(f.data="json-else",A(f.nextSibling,s),t)&&s.before(k(t))}return w(f.nextSibling,s,n),s})(t,n,i,r)??null;let e=n;var l,o=H(t,"attributes",a);for(l of o)if(l?r||(e=l(e,t)??e):e=null,!e)break;return null===e?1===o.length&&null===o[0]?null:t:!1!==e&&w(t.firstChild,void 0,e,r)&&0===o.length?(s(t,"attributes",[null]),null):t}}function e(e){return e.textContent?.includes("${")?c("`"+e.textContent+"`"):null}"undefined"!=typeof htmx&&htmx.defineExtension("json-swap",{isInlineSwap:function(e){return"json"===e},handleSwap:function(e,t,n){if("json"===e)return o(t,{$this:JSON.parse(n.textContent)}),[t]}});let r=[{match:e=>e.name.startsWith("@"),factory(e,t,n){let i=t.name.substring(1),r=n(t.value);if(r)return(e,t)=>{var n=r(e);return null===n?t.removeAttribute(i):t.setAttribute(i,n),e}}},{match:e=>e.name.startsWith("."),factory(e,t,i){let r=i(t.value);if(r){i=t.name,t=i.split(".").map(e=>e&&e.split("-").map(([e,...t],n)=>(0===n?e:e.toUpperCase())+t.join("")).join("")).join(".");let n=new Function("obj","value",`obj${t} = value;`);return(e,t)=>(n(t,r(e)),e)}}},{match:e=>"json-ignore"===e.name,factory(e,t,n){let i=n(t.value,"$prev");return null===i?null:(e,t)=>{if(i({...e,$prev:f(t,"json-ignore-prev")}))return!1;s(t,"json-ignore-prev",e.$this)}}},{match:e=>"json-with"===e.name,factory(e,t,n){let i=n(t.value,"$prev");if(i)return(e,t)=>{var n=f(t,"json-with-prev"),n=i({...e,$prev:n});return!!n&&(s(t,"json-with-prev",n),C(n,y(e)))}}},{match:e=>"json-text"===e.name,factory(e,t,n){let i=n(t.value);if(i)return(e,t)=>{t.textContent=i(e)}}},{match:e=>"json-show"===e.name,factory(e,t,i){if(e instanceof HTMLElement){let n=i(t.value);if(n)return(e,t)=>{t.style.display=n(e)?"":"none"}}}},{match:e=>"json-hide"===e.name,factory(e,t,i){if(e instanceof HTMLElement){let n=i(t.value);if(n)return(e,t)=>{t.style.display=n(e)?"none":""}}}},{match:e=>"name"===e.name,factory(e,n,t){return e instanceof HTMLInputElement?"checkbox"===e.type?(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e)}:"radio"===e.type?(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.checked=e===t.value)}:(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?(e,t)=>{"object"==typeof e.$this&&null!==e.$this&&void 0!==(e=e.$this[n.value])&&(t.value=e)}:void 0}}];function a(e){var n=[];for(let t of e.attributes){var i=(0,r.find(e=>e.match(t))?.factory)?.(e,t,c);if(i)n.push(i);else if(null===i){n.push(null);break}}return n}function T(e,t,n){var i=[];let r=e.nextSibling;for(;r instanceof Text;)r=r.nextSibling;for(;r instanceof Comment&&r!==n;)i.push([r.data,r]),r=l(r)??n;return i}function E(e,t,n){var n=l(e,t,n);return n||(n=document.createComment(t),e.after(n),n)}function m(e,t){return e.nextElementSibling instanceof HTMLTemplateElement&&e.nextElementSibling.hasAttribute(t)?e.nextElementSibling:void 0}function l(e,t,n){let i=0,r=0;for(e=e?.nextSibling??null;e&&e!==n;){if(e instanceof Comment){if(0<i&&"/json-if"===e.data)i--;else if(0<r&&"/json-each"===e.data)r--;else if(0===i&&0===r&&(void 0===t||e.data===t))return e}else if(e instanceof HTMLTemplateElement)for(var{name:l}of e.attributes)"json-if"===l?i++:"json-each"===l&&r++;e=e.nextSibling}return null}function w(e,t,n,i){let r=!0;for(;e&&e!==t;){var l=o(e,n,t,i);e=(null===l?e:(r=!1,l)).nextSibling}return r}function L(e,t){return H(e,"getter-"+t,()=>c(e.getAttribute(t)))}function t(e){return w(e.content.firstChild,void 0,{$this:"preparse"},!0)}function M(e){H(e,"preParsed",t)}function k(e){var t=e.content.cloneNode(!0);return function e(t,n){if(!t||!n)return;t[u]&&(n[u]={...t[u]});t instanceof HTMLTemplateElement&&n instanceof HTMLTemplateElement?e(t.content.firstChild,n.content.firstChild):e(t.firstChild,n.firstChild);e(t.nextSibling,n.nextSibling)}(e.content.firstChild,t.firstChild),t}let u=Symbol();function f(e,t){return(e[u]??={})[t]}function s(e,t,n){(e[u]??={})[t]=n}function H(e,t,n,...i){var r=e[u]??={};let l=r[t];return void 0===l&&(l=n(e,t,...i),r[t]=l),l}function c(e,...t){return e?new Function(`{$this, $parent, $index, $key, ${t.join(", ")}}`,`
        try {
          with ($this){
            return (${e});
          }
        }catch(e){
          if(e instanceof ReferenceError){
            throw new ReferenceError(e.message + ' in '+JSON.stringify($this, null, 2));
          }
          throw e;
        }
      `):null}function A(e,t){var n=e?.previousSibling;if(n)for(;n.nextSibling&&n.nextSibling!==t;)n.nextSibling.remove()}function N(t,n,i){if(t.parentNode){var r=[];let e=t;for(;e&&e!==n;)r.push(e),e=e.nextSibling;i.before(...r)}}return{swap(e,t){o(e,{$this:t})},directives:r}})();
//# sourceMappingURL=./htmx-json.min.js.map